"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _objectWithoutProperties(t,e){var o={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},_createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_propTypes3=require("material-ui/utils/propTypes"),_propTypes4=_interopRequireDefault(_propTypes3),_reactTransitionGroup=require("react-transition-group"),_Paper=require("material-ui/Paper"),_Paper2=_interopRequireDefault(_Paper),_List=require("material-ui/List"),_Divider=require("material-ui/Divider"),_Divider2=_interopRequireDefault(_Divider),_IconButton=require("material-ui/IconButton"),_IconButton2=_interopRequireDefault(_IconButton),_Avatar=require("material-ui/Avatar"),_Avatar2=_interopRequireDefault(_Avatar),_close=require("material-ui/svg-icons/navigation/close"),_close2=_interopRequireDefault(_close),notifications=[],count=0,maxNotifications=void 0,ReactMaterialUiNotifications=function(t){function e(){var t,o,i,r;_classCallCheck(this,e);for(var n=arguments.length,a=Array(n),p=0;p<n;p++)a[p]=arguments[p];return o=i=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.getStyle=function(){var t={position:"fixed",zIndex:1,minWidth:325};return Object.assign(t,i.props.rootStyle)},i.getProps=function(t){var e=i.props,o=(e.children,e.rootStyle,e.maxNotifications,_objectWithoutProperties(e,["children","rootStyle","maxNotifications"]));return Object.assign(t,o)},r=o,_possibleConstructorReturn(i,r)}return _inherits(e,t),_createClass(e,[{key:"componentWillMount",value:function(){notifications=[],maxNotifications=this.props.maxNotifications}},{key:"removeNotification",value:function(t){notifications.splice(t,1),this.forceUpdate()}},{key:"render",value:function(){var t=this;return _react2.default.createElement("div",{style:this.getStyle()},notifications.map(function(e,o){return _react2.default.createElement(Notification,_extends({removeNotification:function(){t.removeNotification(o)},open:!0,key:e.count},t.getProps(e)))}))}}]),e}(_react.Component);ReactMaterialUiNotifications.muiPropTypes={desktop:_propTypes2.default.bool,maxNotifications:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),rootStyle:_propTypes2.default.object},ReactMaterialUiNotifications.defaultProps={maxNotifications:1/0,rootStyle:{bottom:20,right:25}},ReactMaterialUiNotifications.contextTypes={muiTheme:_propTypes2.default.object.isRequired},ReactMaterialUiNotifications.showNotification=function(t){var e=notifications;t.open=!0,t.count=count,e.push(t),e=e.filter(ReactMaterialUiNotifications.filterOpen),notifications=ReactMaterialUiNotifications.shuffleNotifications(e),count++},ReactMaterialUiNotifications.filterOpen=function(t){return t.open},ReactMaterialUiNotifications.shuffleNotifications=function(t){if(t.length>maxNotifications)for(var e in t)if(!("object"!==_typeof(t[e])||t[e].hasOwnProperty("priority")&&t[e].priority)&&(t.splice(e,1),t.length===maxNotifications))break;return t.sort(function(t,e){var o=t.priority,i=e.priority;return!o&&i?1:o&&!i?-1:0}),t},exports.default=ReactMaterialUiNotifications;var Notification=function(t){function e(){var t,o,i,r;_classCallCheck(this,e);for(var n=arguments.length,a=Array(n),p=0;p<n;p++)a[p]=arguments[p];return o=i=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i.getStyle=function(){var t={display:"block",textAlign:"left",borderRadius:3,margin:"12px auto"};return Object.assign(t,i.props.style)},i.onCloseNotification=function(){i.props.removeNotification()},i.getNotificationIcon=function(){var t=void 0;if(i.props.icon)if(i.props.personalised){var e={top:4,margin:0,left:8,width:"auto",height:"auto"},o={textAlign:"center"},r={position:"absolute",padding:4,right:-6,bottom:-4,borderRadius:"50%",backgroundColor:i.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},n=(0,_react.cloneElement)(i.props.icon,{color:i.props.iconFillColor,style:{width:12,height:12}});t=_react2.default.createElement("div",{style:e},_react2.default.createElement(_Avatar2.default,{src:i.props.avatar,size:44,style:o}),_react2.default.createElement("div",{style:r},n))}else{var a={height:32,width:32,top:4,padding:6,margin:0,left:8,borderRadius:"50%",backgroundColor:i.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},p=(0,_react.cloneElement)(i.props.icon,{color:i.props.iconFillColor,style:{margin:0}});t=_react2.default.createElement("div",{style:a},p)}return t},r=o,_possibleConstructorReturn(i,r)}return _inherits(e,t),_createClass(e,[{key:"componentWillMount",value:function(){var t=this;this.props.autoHide&&(this.autoHideTimeout=setTimeout(function(){t.props.removeNotification()},this.props.autoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoHideTimeout)}},{key:"render",value:function(){var t=this,e={width:36,height:36,top:-3,right:4,padding:6},o={height:18,width:18},i={padding:this.props.icon?"8px 8px 0 72px":"8px 8px 0 12px"},r={position:"relative"},n={padding:"12px 0 12px 72px"},a={paddingLeft:72},p={marginTop:8,marginBottom:8},s={position:"absolute",right:this.props.desktop?42:8,fontSize:12,top:14},l=void 0,c=void 0,u=void 0,f=void 0,d=void 0;return this.props.additionalText&&(l=_react2.default.createElement("div",{style:p},this.props.additionalText)),c=this.props.overflowText?_react2.default.createElement("span",null,_react2.default.createElement(_Divider2.default,{inset:!0}),_react2.default.createElement("div",{style:n},this.props.overflowText)):_react2.default.createElement("span",null),u=this.props.overflowContent?_react2.default.createElement("span",null,_react2.default.createElement(_Divider2.default,{inset:!0}),_react2.default.createElement("div",{style:a},this.props.overflowContent)):_react2.default.createElement("span",null),this.props.desktop&&(f=_react2.default.createElement(_IconButton2.default,{style:e,iconStyle:o,onTouchTap:this.onCloseNotification},_react2.default.createElement(_close2.default,null))),this.props.timestamp&&(d=_react2.default.createElement("div",{style:s},this.props.timestamp)),_react2.default.createElement(_reactTransitionGroup.CSSTransitionGroup,{transitionName:this.props.transitionName?this.props.transitionName:"",transitionAppear:!!this.props.transitionAppear&&this.props.transitionAppear,transitionEnter:!!this.props.transitionEnter&&this.props.transitionEnter,transitionLeave:!!this.props.transitionLeave&&this.props.transitionLeave,transitionAppearTimeout:this.props.transitionAppearTimeout?this.props.transitionAppearTimeout:0,transitionEnterTimeout:this.props.transitionEnterTimeout?this.props.transitionEnterTimeout:0,transitionLeaveTimeout:this.props.transitionLeaveTimeout?this.props.transitionLeaveTimeout:0},_react2.default.createElement(_Paper2.default,{style:this.getStyle(),zDepth:this.props.zDepth,transitionEnabled:!1},_react2.default.createElement(_List.List,{style:r},_react2.default.createElement(_List.ListItem,{primaryText:this.props.title,secondaryText:l,secondaryTextLines:this.props.additionalLines,leftIcon:this.getNotificationIcon(),insetChildren:!0,rightIconButton:f,innerDivStyle:i,disabled:!this.props.onClick,onTouchTap:function(){t.props.onClick&&(t.props.onClick(),t.props.removeNotification())}}),d),u,c))}}]),e}(_react.Component);Notification.muiPropTypes={additionalText:_propTypes2.default.string,additionalLines:_propTypes2.default.number,autoHide:_propTypes2.default.number,avatar:_propTypes2.default.string,icon:_propTypes2.default.element,iconBadgeColor:_propTypes2.default.string,iconFillColor:_propTypes2.default.string,onClick:_propTypes2.default.func,open:_propTypes2.default.bool,overflowText:_propTypes2.default.string,overflowContent:_propTypes2.default.element,personalised:_propTypes2.default.bool,priority:_propTypes2.default.bool,removeNotification:_propTypes2.default.func,style:_propTypes2.default.object,title:_propTypes2.default.string,timestamp:_propTypes2.default.string,zDepth:_propTypes4.default.zDepth},Notification.defaultProps={iconFillColor:"#fff",zDepth:1},Notification.contextTypes={muiTheme:_propTypes2.default.object.isRequired};