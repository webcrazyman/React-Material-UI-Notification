"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _objectWithoutProperties(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("material-ui/utils/propTypes"),_propTypes2=_interopRequireDefault(_propTypes),_reactAddonsCssTransitionGroup=require("react-addons-css-transition-group"),_reactAddonsCssTransitionGroup2=_interopRequireDefault(_reactAddonsCssTransitionGroup),_Paper=require("material-ui/Paper"),_Paper2=_interopRequireDefault(_Paper),_List=require("material-ui/List"),_Divider=require("material-ui/Divider"),_Divider2=_interopRequireDefault(_Divider),_IconButton=require("material-ui/IconButton"),_IconButton2=_interopRequireDefault(_IconButton),_Avatar=require("material-ui/Avatar"),_Avatar2=_interopRequireDefault(_Avatar),_close=require("material-ui/svg-icons/navigation/close"),_close2=_interopRequireDefault(_close),ReactMaterialUiNotifications=function(e){function t(){var e,r,o,i;_classCallCheck(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=o=_possibleConstructorReturn(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.getStyle=function(){var e={position:"fixed",minWidth:325};return Object.assign(e,o.props.rootStyle)},o.getInnerData=function(){var e=o.props.children.constructor===Array?o.props.children:[o.props.children];if(e.length>o.props.maxNotifications)for(var t in e)if(!("object"!==_typeof(e[t])||e[t].hasOwnProperty("priority")&&e[t].priority)&&(e.splice(t,1),e.length===o.props.maxNotifications))break;return e.sort(function(e,t){var r=e.priority,o=t.priority;return!r&&o?1:r&&!o?-1:0}),e},o.getProps=function(e){var t=o.props,r=(t.children,t.rootStyle,t.maxNotifications,_objectWithoutProperties(t,["children","rootStyle","maxNotifications"]));return Object.assign(e,r)},i=r,_possibleConstructorReturn(o,i)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.getInnerData();return _react2["default"].createElement("div",{style:this.getStyle()},t.map(function(t,r){return _react2["default"].createElement(Notification,_extends({open:!0,index:r,key:r},e.getProps(t)))}))}}]),t}(_react.Component);ReactMaterialUiNotifications.propTypes={children:_react2["default"].PropTypes.oneOfType([_react.PropTypes.array,_react.PropTypes.object]),desktop:_react.PropTypes.bool,maxNotifications:_react.PropTypes.number,rootStyle:_react.PropTypes.object,transitionName:_react.PropTypes.string,transitionEnter:_react.PropTypes.bool,transitionLeave:_react.PropTypes.bool,transitionEnterTimeout:_react.PropTypes.number,transitionLeaveTimeout:_react.PropTypes.number},ReactMaterialUiNotifications.defaultProps={maxNotifications:3,rootStyle:{bottom:20,right:25}},ReactMaterialUiNotifications.contextTypes={muiTheme:_react.PropTypes.object.isRequired},exports["default"]=ReactMaterialUiNotifications;var Notification=function(e){function t(){var e,r,o,i;_classCallCheck(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=o=_possibleConstructorReturn(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.getStyle=function(){var e={display:o.state.open?"block":"none",textAlign:"left",borderRadius:3,margin:"12px auto"};return Object.assign(e,o.props.style)},o.onCloseNotification=function(){clearTimeout(o.autoHideTimeout),o.setState({open:!1})},o.getNotificationIcon=function(){var e=void 0;if(o.props.icon)if(o.props.personalised){var t={top:4,margin:0,left:8,width:"auto",height:"auto"},r={textAlign:"center"},i={position:"absolute",padding:4,right:-6,bottom:-4,borderRadius:"50%",backgroundColor:o.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},n=(0,_react.cloneElement)(o.props.icon,{color:o.props.iconFillColor,style:{width:12,height:12}});e=_react2["default"].createElement("div",{style:t},_react2["default"].createElement(_Avatar2["default"],{src:o.props.avatar,size:44,style:r}),_react2["default"].createElement("div",{style:i},n))}else{var a={height:32,width:32,top:4,padding:6,margin:0,left:8,borderRadius:"50%",backgroundColor:o.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},s=(0,_react.cloneElement)(o.props.icon,{color:o.props.iconFillColor,style:{margin:0}});e=_react2["default"].createElement("div",{style:a},s)}return e},i=r,_possibleConstructorReturn(o,i)}return _inherits(t,e),_createClass(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({open:this.props.open}),this.props.autoHide&&(this.autoHideTimeout=setTimeout(function(){e.setState({open:!1})},this.props.autoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoHideTimeout)}},{key:"render",value:function(){var e={width:36,height:36,top:-3,right:4,padding:6},t={height:18,width:18},r={padding:this.props.icon?"8px 8px 0 72px":"8px 8px 0 12px"},o={position:"relative"},i={padding:"12px 0 12px 72px"},n={paddingLeft:72},a={marginTop:8,marginBottom:8},s={position:"absolute",right:this.props.desktop?42:8,fontSize:12,top:14},p=void 0,l=void 0,c=void 0,u=void 0,f=void 0;return this.props.additionalText&&(p=_react2["default"].createElement("div",{style:a},this.props.additionalText)),l=this.props.overflowText?_react2["default"].createElement("span",null,_react2["default"].createElement(_Divider2["default"],{inset:!0}),_react2["default"].createElement("div",{style:i},this.props.overflowText)):_react2["default"].createElement("span",null),c=this.props.overflowContent?_react2["default"].createElement("span",null,_react2["default"].createElement(_Divider2["default"],{inset:!0}),_react2["default"].createElement("div",{style:n},this.props.overflowContent)):_react2["default"].createElement("span",null),this.props.desktop&&(u=_react2["default"].createElement(_IconButton2["default"],{style:e,iconStyle:t,onTouchTap:this.onCloseNotification},_react2["default"].createElement(_close2["default"],null))),this.props.timestamp&&(f=_react2["default"].createElement("div",{style:s},this.props.timestamp)),_react2["default"].createElement(_reactAddonsCssTransitionGroup2["default"],{transitionName:this.props.transitionName?this.props.transitionName:"",transitionEnter:!!this.props.transitionEnter&&this.props.transitionEnter,transitionLeave:!!this.props.transitionLeave&&this.props.transitionLeave,transitionEnterTimeout:this.props.transitionEnterTimeout?this.props.transitionEnterTimeout:0,transitionLeaveTimeout:this.props.transitionLeaveTimeout?this.props.transitionLeaveTimeout:0},_react2["default"].createElement(_Paper2["default"],{key:this.props.index,style:this.getStyle(),zDepth:this.props.zDepth,transitionEnabled:!1},_react2["default"].createElement(_List.List,{style:o},_react2["default"].createElement(_List.ListItem,{primaryText:this.props.title,secondaryText:p,secondaryTextLines:this.props.additionalLines,leftIcon:this.getNotificationIcon(),insetChildren:!0,rightIconButton:u,innerDivStyle:r}),f),c,l))}}]),t}(_react.Component);Notification.propTypes={additionalText:_react.PropTypes.string,additionalLines:_react.PropTypes.number,autoHide:_react.PropTypes.number,avatar:_react.PropTypes.string,index:_react.PropTypes.number,icon:_react.PropTypes.element,iconBadgeColor:_react.PropTypes.string,iconFillColor:_react.PropTypes.string,open:_react.PropTypes.bool,overflowText:_react.PropTypes.string,overflowContent:_react.PropTypes.element,personalised:_react.PropTypes.bool,priority:_react.PropTypes.bool,style:_react.PropTypes.object,title:_react.PropTypes.string,timestamp:_react.PropTypes.string,zDepth:_propTypes2["default"].zDepth},Notification.defaultProps={iconFillColor:"#fff",zDepth:1},Notification.contextTypes={muiTheme:_react.PropTypes.object.isRequired};