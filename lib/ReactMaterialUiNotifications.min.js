"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _objectWithoutProperties(t,e){var i={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("material-ui/utils/propTypes"),_propTypes2=_interopRequireDefault(_propTypes),_reactAddonsCssTransitionGroup=require("react-addons-css-transition-group"),_reactAddonsCssTransitionGroup2=_interopRequireDefault(_reactAddonsCssTransitionGroup),_Paper=require("material-ui/Paper"),_Paper2=_interopRequireDefault(_Paper),_List=require("material-ui/List"),_Divider=require("material-ui/Divider"),_Divider2=_interopRequireDefault(_Divider),_IconButton=require("material-ui/IconButton"),_IconButton2=_interopRequireDefault(_IconButton),_Avatar=require("material-ui/Avatar"),_Avatar2=_interopRequireDefault(_Avatar),_close=require("material-ui/svg-icons/navigation/close"),_close2=_interopRequireDefault(_close),notifications=[],count=0,maxNotifications=void 0,ReactMaterialUiNotifications=function(t){function e(){var t,i,o,r;_classCallCheck(this,e);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=o=_possibleConstructorReturn(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),o.getStyle=function(){var t={position:"fixed",minWidth:325};return Object.assign(t,o.props.rootStyle)},o.getProps=function(t){var e=o.props,i=(e.children,e.rootStyle,e.maxNotifications,_objectWithoutProperties(e,["children","rootStyle","maxNotifications"]));return Object.assign(t,i)},r=i,_possibleConstructorReturn(o,r)}return _inherits(e,t),_createClass(e,[{key:"componentWillMount",value:function(){maxNotifications=this.props.maxNotifications}},{key:"render",value:function(){var t=this;return _react2["default"].createElement("div",{style:this.getStyle()},notifications.map(function(e,i){return _react2["default"].createElement(Notification,_extends({open:!0,key:e.count},t.getProps(e)))}))}}]),e}(_react.Component);ReactMaterialUiNotifications.propTypes={desktop:_react.PropTypes.bool,maxNotifications:_react2["default"].PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.number]),rootStyle:_react.PropTypes.object},ReactMaterialUiNotifications.defaultProps={maxNotifications:1/0,rootStyle:{bottom:20,right:25}},ReactMaterialUiNotifications.contextTypes={muiTheme:_react.PropTypes.object.isRequired},ReactMaterialUiNotifications.showNotification=function(t){var e=notifications;t.open=!0,t.count=count,e.push(t),e=e.filter(ReactMaterialUiNotifications.filterOpen),notifications=ReactMaterialUiNotifications.shuffleNotifications(e),count++},ReactMaterialUiNotifications.filterOpen=function(t){return t.open},ReactMaterialUiNotifications.shuffleNotifications=function(t){if(t.length>maxNotifications)for(var e in t)if(!("object"!==_typeof(t[e])||t[e].hasOwnProperty("priority")&&t[e].priority)&&(t.splice(e,1),t.length===maxNotifications))break;return t.sort(function(t,e){var i=t.priority,o=e.priority;return!i&&o?1:i&&!o?-1:0}),t},exports["default"]=ReactMaterialUiNotifications;var Notification=function(t){function e(){var t,i,o,r;_classCallCheck(this,e);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=o=_possibleConstructorReturn(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),o.getStyle=function(){var t={display:o.state.open?"block":"none",textAlign:"left",borderRadius:3,margin:"12px auto"};return Object.assign(t,o.props.style)},o.onCloseNotification=function(){clearTimeout(o.autoHideTimeout),o.setState({open:!1})},o.getNotificationIcon=function(){var t=void 0;if(o.props.icon)if(o.props.personalised){var e={top:4,margin:0,left:8,width:"auto",height:"auto"},i={textAlign:"center"},r={position:"absolute",padding:4,right:-6,bottom:-4,borderRadius:"50%",backgroundColor:o.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},n=(0,_react.cloneElement)(o.props.icon,{color:o.props.iconFillColor,style:{width:12,height:12}});t=_react2["default"].createElement("div",{style:e},_react2["default"].createElement(_Avatar2["default"],{src:o.props.avatar,size:44,style:i}),_react2["default"].createElement("div",{style:r},n))}else{var a={height:32,width:32,top:4,padding:6,margin:0,left:8,borderRadius:"50%",backgroundColor:o.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},s=(0,_react.cloneElement)(o.props.icon,{color:o.props.iconFillColor,style:{margin:0}});t=_react2["default"].createElement("div",{style:a},s)}return t},r=i,_possibleConstructorReturn(o,r)}return _inherits(e,t),_createClass(e,[{key:"componentWillMount",value:function(){var t=this;this.setState({open:this.props.open}),this.props.autoHide&&(this.autoHideTimeout=setTimeout(function(){t.setState({open:!1})},this.props.autoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoHideTimeout)}},{key:"render",value:function(){var t={width:36,height:36,top:-3,right:4,padding:6},e={height:18,width:18},i={padding:this.props.icon?"8px 8px 0 72px":"8px 8px 0 12px"},o={position:"relative"},r={padding:"12px 0 12px 72px"},n={paddingLeft:72},a={marginTop:8,marginBottom:8},s={position:"absolute",right:this.props.desktop?42:8,fontSize:12,top:14},p=void 0,c=void 0,l=void 0,u=void 0,f=void 0;return this.props.additionalText&&(p=_react2["default"].createElement("div",{style:a},this.props.additionalText)),c=this.props.overflowText?_react2["default"].createElement("span",null,_react2["default"].createElement(_Divider2["default"],{inset:!0}),_react2["default"].createElement("div",{style:r},this.props.overflowText)):_react2["default"].createElement("span",null),l=this.props.overflowContent?_react2["default"].createElement("span",null,_react2["default"].createElement(_Divider2["default"],{inset:!0}),_react2["default"].createElement("div",{style:n},this.props.overflowContent)):_react2["default"].createElement("span",null),this.props.desktop&&(u=_react2["default"].createElement(_IconButton2["default"],{style:t,iconStyle:e,onTouchTap:this.onCloseNotification},_react2["default"].createElement(_close2["default"],null))),this.props.timestamp&&(f=_react2["default"].createElement("div",{style:s},this.props.timestamp)),_react2["default"].createElement(_reactAddonsCssTransitionGroup2["default"],{transitionName:this.props.transitionName?this.props.transitionName:"",transitionAppear:!!this.props.transitionAppear&&this.props.transitionAppear,transitionEnter:!!this.props.transitionEnter&&this.props.transitionEnter,transitionLeave:!!this.props.transitionLeave&&this.props.transitionLeave,transitionAppearTimeout:this.props.transitionAppearTimeout?this.props.transitionAppearTimeout:0,transitionEnterTimeout:this.props.transitionEnterTimeout?this.props.transitionEnterTimeout:0,transitionLeaveTimeout:this.props.transitionLeaveTimeout?this.props.transitionLeaveTimeout:0},_react2["default"].createElement(_Paper2["default"],{key:this.state.open,style:this.getStyle(),zDepth:this.props.zDepth,transitionEnabled:!1},_react2["default"].createElement(_List.List,{style:o},_react2["default"].createElement(_List.ListItem,{primaryText:this.props.title,secondaryText:p,secondaryTextLines:this.props.additionalLines,leftIcon:this.getNotificationIcon(),insetChildren:!0,rightIconButton:u,innerDivStyle:i}),f),l,c))}}]),e}(_react.Component);Notification.propTypes={additionalText:_react.PropTypes.string,additionalLines:_react.PropTypes.number,autoHide:_react.PropTypes.number,avatar:_react.PropTypes.string,icon:_react.PropTypes.element,iconBadgeColor:_react.PropTypes.string,iconFillColor:_react.PropTypes.string,open:_react.PropTypes.bool,overflowText:_react.PropTypes.string,overflowContent:_react.PropTypes.element,personalised:_react.PropTypes.bool,priority:_react.PropTypes.bool,style:_react.PropTypes.object,title:_react.PropTypes.string,timestamp:_react.PropTypes.string,zDepth:_propTypes2["default"].zDepth},Notification.defaultProps={iconFillColor:"#fff",zDepth:1},Notification.contextTypes={muiTheme:_react.PropTypes.object.isRequired};